{% extends "app/layout.html" %}
{% load mathfilters %}
{% load staticfiles%}
{% load i18n %}

{% block head %}
    {% load staticfiles%}
    <title>{% trans "Tripalocal | Experience it like a local"%}</title>
    {%if LANGUAGE == "zh-CN"%}
    <meta name="keywords" content="私人导游，本土导游，境外旅游，澳洲旅行，个性化旅行线路"/>
    <meta name="description" content="本土客，一个提供个性化向导的旅行平台，拥有全球私人导游，搜罗海外本土特色旅行线路！本土客专注游客目的地、旅行线路，p2p出境游，分享游客旅行经验。全球游客发布目的地旅行线路，支持预订目的地线路，本土客当地人带你体验目的地旅行魅力，看最美丽的风景，吃最地道的美食，玩最刺激的活动，做最接地气的文化交流，让你体验一段真正属于自己风格的自由行。"/>
    {% endif %}
    <link href="{% static 'app/content/bootstrap-datetimepicker.css' %}" rel="stylesheet">
    <link href="{% static 'app/content/homepage.css' %}" rel="stylesheet">

    <!-- H1 google font -->
    <!--<link href='//fonts.googleapis.com/css?family=Exo:600,600italic' rel='stylesheet' type='text/css'>-->

    <script type='text/javascript' src="//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.0.7/components/dropdown.min.js"></script>
    <script type='text/javascript' src="//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.0.7/components/transition.min.js"></script>

	<script>
		$(function() {
			$("#slideshow > div:gt(0)").hide();
			setInterval(function() {
			  $('#slideshow > div:first')
			    .fadeOut(1000)
			    .next()
			    .fadeIn(1000)
			    .end()
			    .appendTo('#slideshow');
			},  5000);
		});
	</script>
    <script type="text/javascript" src="{% url 'django.views.i18n.javascript_catalog' %}"></script>
{% endblock %}

{% block content %}

    <div class="jumbotron">
      <div class="container">
        <div class="homepage-logo"></div>
          <form id="search_form" action="" method="post">
            {% csrf_token %}

              <div class="search-bar">
                <div class="container-fluid">
                  <div class="row">
                    <div class="search-location col-sm-6">
                      <div id="id-city" class="ui selection dropdown">
                        <input type="hidden" name="city" value="city">
                          <i class="dropdown icon"></i>
                          <div class="text">{% trans "City" %}</div>
                          <div id="city-menu" class="menu"></div>
                      </div>
                    </div>
                    <div class="search-from col-sm-2">
                      {{form.start_date}}
                    </div>
                    <div class="search-to col-sm-2">
                      {{form.end_date}}
                    </div>
                    <div class="home-search-button col-sm-2">
                      <input id="search-submit" type="submit" value="{% trans "Search" %}" name="search" class="btn btn-primary btn-search">
                    </div>
                  </div>
                </div>
              </div>

            </form>
            <div>
            {%if LANGUAGE == "zh-CN"%}
                <p>{% trans " to get notified when we launch in more countries."%}<a href="{{GEO_POSTFIX}}accounts/signup/?next={{ request.path }}">{% trans "Sign up" %}</a></p>
            {%else%}
                <p><a href="{{GEO_POSTFIX}}accounts/signup/?next={{ request.path }}">{% trans "Sign up" %}</a>{% trans " to get notified when we launch in more countries."%}</p>
            {%endif%}
            </div>
        </div>
    </div>

    <div class="tease-box">

      <h1>{% trans "Discover authentic experiences" %}</h1>
      <p>{%trans "Explore local places" %}</p>

            <div class="container">
                <div class="row">
                    {% for experience in featuredExperience %}
                        {% if forloop.first %}
                            <div class="col-sm-4">
                                <div class="price-offer"
                                     style="background-image:url({{ MEDIA_URL }}{{ experience.background }});">
                                    <a class="box-link"
                                       href="{{ GEO_POSTFIX }}experience/{{ experience.experience.id }}">
                                        <div class="profile-featured">
                                            <img src="{{ MEDIA_URL }}{{ experience.hostImage }}"
                                                 height="240">
                                        </div>
                                        <div class="price-box">
                                            {% trans "From" %} {{ experience.experience.dollarsign }}<span>{{ experience.experience.price|mul:1.429|floatformat:"0" }}</span>
                                            {% blocktrans with currency=experience.experience.currency %} {{ currency }}
                                                /person {% endblocktrans %}
                                        </div>
                                    </a>
                                </div>
                            </div>

                        {% endif %}
                    {% endfor %}
                    {% for city, cityDisplayName in cityList %}
                        {% if forloop.counter <= 1 %}
                            <div class="col-sm-4">
                                <div class="city"
                                     style="background-image: linear-gradient( rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3) ), url({{ MEDIA_URL }}city/{{ city }}.jpg);">
                                    <a class="box-link" href="{% url 'SearchView' city %}">
                                        <h1>{{ cityDisplayName }}</h1>
                                    </a>
                                </div>
                            </div>
                        {% endif %}
                    {% endfor %}
                    <div class="col-sm-4">
                        <div class="custom-itinerary"
                             style="background-image:url({% static 'app/img/homepage_banner.jpg' %});">
                            <button class="btn btn-primary request-btn">{% trans 'Request a trip' %}</button>
                        </div>
                    </div>
                </div>

                <div class="row">
                {% for city, cityDisplayName in cityList %}
                    {% if forloop.counter == 3 %}
                    <div class="col-sm-8">
                      <div class="city" style="background-image:linear-gradient( rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3) ),url({{ MEDIA_URL }}city/{{ city }}.jpg);">
                          <a class="box-link" href="{% url 'SearchView' city %}">
                              <h1>{{ cityDisplayName }}</h1>
                          </a>
                      </div>
                    </div>
                    {% endif %}
                {% endfor %}
                {% for experience in featuredExperience %}
                    {% if forloop.counter == 2 %}
                    <div class="col-sm-4">
                      <div class="price-offer" style="background-image:url({{ MEDIA_URL }}{{ experience.background }});">
                          <a class="box-link" href="{{GEO_POSTFIX}}experience/{{ experience.experience.id }}">
                              <div class="profile-featured">
                                  <img src="{{ MEDIA_URL }}{{ experience.hostImage }}" height="240">
                              </div>
                              <div class="price-box">
                                  {% trans "From" %} {{experience.experience.dollarsign}}<span>{{ experience.experience.price|mul:1.429|floatformat:"0" }}</span> {% blocktrans with currency=experience.experience.currency %} {{currency}}/person {% endblocktrans %}
                              </div>
                          </a>
                      </div>
                    </div>
                    {% endif %}
                {% endfor %}
                </div>

                <div class="row">
                {% for city, cityDisplayName in cityList %}
                    {% if forloop.counter == 4%}
                    <div class="col-sm-4">
                      <div class="city" style="background-image:linear-gradient( rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3) ),url({{ MEDIA_URL }}city/{{ city }}.jpg);">
                          <a class="box-link" href="{% url 'SearchView' city %}">
                              <h1>{{ cityDisplayName }}</h1>
                          </a>
                      </div>
                    </div>
                    {% endif %}
                {% endfor %}
                {% for experience in featuredExperience %}
                    {% if forloop.counter == 3 %}
                    <div class="col-sm-4">
                      <div class="price-offer" style="background-image:url({{ MEDIA_URL }}{{ experience.background }});">
                          <a class="box-link" href="{{GEO_POSTFIX}}experience/{{ experience.experience.id }}">
                              <div class="profile-featured">
                                  <img src="{{ MEDIA_URL }}{{ experience.hostImage }}" height="240">
                              </div>
                              <div class="price-box">
                                  {% trans "From" %} {{experience.experience.dollarsign}}<span>{{ experience.experience.price|mul:1.429|floatformat:"0" }}</span> {% blocktrans with currency=experience.experience.currency %} {{currency}}/person {% endblocktrans %}
                              </div>
                          </a>
                      </div>
                    </div>

                    {% endif %}
                {% endfor %}
                {% for city, cityDisplayName in cityList %}
                    {% if forloop.counter == 5%}
                    <div class="col-sm-4">
                      <div class="city " style="background-image:linear-gradient( rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3) ),url({{ MEDIA_URL }}city/{{ city }}.jpg);">
                          <a class="box-link" href="{% url 'SearchView' city %}">
                              <h1>{{ cityDisplayName }}</h1>
                          </a>
                      </div>
                    </div>

                    {% endif %}
                {% endfor %}
                </div>
            </div>
    </div>

    <div id="video-sec" class="video-box" style="background-image:url({{ MEDIA_URL }}homepage/video_poster-01.jpg)">
        <div class="video-overlay">
            <h1 style="font-size:32px;font-family:'EXO', Helvertica, sans-serif;">{% trans "Travel with Tripalocal" %}</h1>
            <p style="font-size:16px;">{% trans "See how it works" %}</p>
            <br><br>
            <a style="cursor:pointer" id="enter_fullscreen"><img src="{{ MEDIA_URL }}homepage/play_btn.svg" width="75"></a>
        </div>
    </div>
    <div id="video-fullscreen" class="video-fullscreen">
        <a id="exit_video" style="position:absolute; top:40px; right:40px; cursor:pointer"><img src="{{ MEDIA_URL }}homepage/closeIcon-01.svg" width="30"></a>
        <div class="video-wrap">
            <video controls preload="metadata">
                <source src="http://bponlinewoc2264.ngcdn.telstra.com/pd_chief/chief_preview/Tripalocal%20Delivery_1.mp4" type="video/mp4">
                <source src="movie.ogg" type="video/ogg">
                {% trans "Your browser does not support the video tag."%}
            </video>
        </div>
    </div>

    <div class="community-box">
        <div class="container">
            <h1>{% trans "Our Community"%}</h1>
            <div class="row">
                <div class="col-sm-6">
                  <div class="box" style="background-image:url(/images/homepage/travelling-01.jpg)">
                    <a class=" btn btn-danger">{% trans "Travelling" %}<br><small>{% trans "(Coming soon)"%}</small></a>
                  </div>
                </div>
                <div class="col-sm-6">
                  <div class="box" style="background-image:url(/images/homepage/hosting-01.jpg)">
                    <a class=" btn btn-primary">{% trans "Hosting" %}<br><small>{% trans "(Coming soon)"%}</small></a>
                  </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
    <script type="text/javascript" src="{% static 'bootstrap3_datetime/js/moment.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'bootstrap3_datetime/js/bootstrap-datetimepicker.min.js' %}"></script>
    <script language="javascript" type="text/javascript" src="{% static 'app/scripts/index.js' %}"></script>
    <script charset="utf-8" type="text/javascript">
        $(document).ready(function () {
            {% for k, v in locations %}
                var header = '<div class=\"header\">' + '{{ k }}' + '</div>';
                $('#city-menu').append(header);
                {% for id, name, state in v %}
                    var city = '<div class=\"item\" data-value=' + '{{ id }}' +
                            ' data-text=\"' + '{{ name }}\"' + '>' + '{{ name }} ' +
                            '<span class=\"light-color\">' + '{{ state }}' + '</span></div>';
                    $('#city-menu').append(city);
                {% endfor %}
            {% endfor %}

            $('.ui.dropdown').dropdown();

            $("#id_start_date").attr("placeholder", '{%trans " From " %}');
            $("#id_end_date").attr("placeholder", '{%trans " To " %}');
        });
    </script>
{% endblock %}
